on:
  workflow_dispatch:
  push:
    paths:
      - '.github/workflows/diva_orcid_kthid.yml'
  schedule:
    - cron: '0 9 * * *' # UTC 49th min after 01th hour every day of month, month, day of week

name: Upload DiVA ORCiD / kthId pairs to object storage

jobs:
  docker:
    runs-on: ubuntu-latest
    container: ghcr.io/kth-library/kthcorpus
    timeout-minutes: 20
    env:
      MC_HOST_kthb: ${{ secrets.MC_HOST_KTHB }}
    steps:
      - run: |
          R -e 'library(kthcorpus); diva_orcid_kthid_upload();'
